from sklearn.cluster import KMeans

class UserCluster:
    def __init__(self, num_cluster):
        self.num_cluster = num_cluster
        self.model = KMeans(n_clusters=num_cluster, max_iter=500, tol=1e-04, random_state=0)

    def fit(self, features):
        self.model.fit(features)

    def predict_cluster(self, feature):
        return self.model.predict(feature)


if __name__=='__main__':
    data = {'109511': [1.0, 0.381149, 0.000129, 0.060038, 0.269129, 0.289554], '109495': [1.0, 0.313277, 0.000125, 0.018413, 0.410555, 0.25763], '109503': [1.0, 0.306008, 0.00045, 0.077048, 0.230439, 0.386055], '109484': [1.0, 0.438513, 3e-06, 0.030714, 0.384494, 0.146277], '109502': [1.0, 0.277121, 0.000131, 0.038153, 0.335835, 0.34876], '109453': [1.0, 0.421669, 1.1e-05, 0.010902, 0.309585, 0.257833], '109473': [1.0, 0.295442, 1.4e-05, 0.135191, 0.292304, 0.27705], '109506': [1.0, 0.264355, 1.2e-05, 0.037393, 0.420649, 0.277591], '109509': [1.0, 0.306008, 0.00045, 0.077048, 0.230439, 0.386055], '109498': [1.0, 0.306008, 0.00045, 0.077048, 0.230439, 0.386055], '109513': [1.0, 0.211406, 3.6e-05, 0.002773, 0.569886, 0.2159], '109508': [1.0, 0.264355, 1.2e-05, 0.037393, 0.420649, 0.277591], '109515': [1.0, 0.281649, 0.000173, 0.195994, 0.151003, 0.371182], '109501': [1.0, 0.249086, 0.001009, 0.514682, 0.067732, 0.167491], '109514': [1.0, 0.29775, 1.3e-05, 0.011603, 0.512182, 0.178452], '109512': [1.0, 0.297322, 2.5e-05, 0.034951, 0.413566, 0.254137], '109505': [1.0, 0.375829, 2.5e-05, 0.033041, 0.349637, 0.241468], '109492': [1.0, 0.33183, 2.2e-05, 0.019904, 0.44039, 0.207855], '109494': [1.0, 0.306008, 0.00045, 0.077048, 0.230439, 0.386055], '109510': [1.0, 0.287909, 2.5e-05, 0.008983, 0.511333, 0.191751]}
    km = UserCluster(3)
    features = []
    ids = []
    for i, v in data.items():
        ids.append(i)
        features.append(v)
    km.fit(features)
    features.append([1.0, 0.381149, 0.001129, 0.260038, 0.369129, 0.289554])
    features.append([1.0, 0.381149, 0.000129, 0.060038, 0.269129, 0.189554])
    features.append([1.0, 0.381149, 0.000129, 0.060038, 0.269129, 0.189554])
    for v in features:
        print(km.predict_cluster(v))

